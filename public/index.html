
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ì–æ–ª–æ—Å–æ–≤–æ–π –ß–∞—Ç</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    #messages { height: 500px; }
  </style>
</head>
<body class="bg-gray-900 text-white min-h-screen flex flex-col items-center py-8 relative">

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
  <div id="authModal" class="absolute inset-0 bg-black bg-opacity-90 flex flex-col justify-center items-center z-50">
    <div class="bg-gray-800 p-6 rounded shadow-lg w-80 text-center">
      <h2 class="text-xl font-bold mb-4">–í–≤–µ–¥–∏—Ç–µ –∏–º—è</h2>
      <input id="authName" placeholder="–í–∞—à–µ –∏–º—è" class="p-2 w-full rounded bg-gray-700 text-white mb-4 border border-gray-600">
      <button onclick="submitName()" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded w-full">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
    </div>
  </div>

  <h1 class="text-3xl font-bold mb-4">üéß –ì–æ–ª–æ—Å–æ–≤–æ–π –ß–∞—Ç</h1>

  <div class="flex gap-4 mb-4">
    <button onclick="toggleMic()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded">
      üéô –ú–∏–∫—Ä–æ—Ñ–æ–Ω: <span id="micStatus">–≤–∫–ª</span>
    </button>
    <button onclick="toggleCam()" class="px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded">
      üì∑ –ö–∞–º–µ—Ä–∞: <span id="camStatus">–≤—ã–∫–ª</span>
    </button>
    <button onclick="leaveRoom()" class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded">üö™ –ü–æ–∫–∏–Ω—É—Ç—å</button>
  </div>

  <div class="flex flex-col md:flex-row gap-8 w-full max-w-5xl">
    <div class="w-full md:w-1/2">
      <h2 class="text-xl mb-2">üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏</h2>
      <ul id="userList" class="space-y-1 bg-gray-800 p-4 rounded max-h-64 overflow-y-auto border border-gray-700 text-sm"></ul>
    </div>

    <div class="w-full md:w-1/2">
      <h2 class="text-xl mb-2">üí¨ –ß–∞—Ç</h2>
      <div id="messages" class="bg-gray-800 p-4 rounded overflow-y-auto border border-gray-700 mb-2 text-sm space-y-1"></div>
      <div class="flex gap-2">
        <input id="chatInput" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..." class="flex-1 p-2 rounded bg-gray-700 text-white border border-gray-600" onkeydown="if(event.key==='Enter')sendMessage()">
        <button onclick="sendMessage()" class="bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <div id="videoContainer" class="mt-6 max-w-4xl w-full flex flex-wrap gap-4 justify-center"></div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="client.js"></script>
  <script>
    function submitName() {
      const name = document.getElementById('authName').value.trim();
      if (!name) return;
      localStorage.setItem('username', name);
      document.getElementById('authModal').style.display = 'none';
      document.getElementById('userId').value = name;
      joinRoom();
    }

    window.onload = () => {
      const stored = localStorage.getItem('username');
      if (stored) {
        document.getElementById('authModal').style.display = 'none';
        document.getElementById('userId').value = stored;
        joinRoom();
      }
    }
  </script>
</body>
</html>
